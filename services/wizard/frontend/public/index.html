<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaspa All-in-One Installation Wizard</title>
    
    <!-- Kaspa Brand Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;500;600&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Favicons - SVG with PNG fallbacks -->
    <link rel="icon" type="image/svg+xml" href="/assets/brand/icons/svg/kaspa-icon-light.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/brand/icons/png/kaspa-icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/brand/icons/png/kaspa-icon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/brand/icons/png/kaspa-icon-180.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/styles/wizard.css">
</head>
<body>
    <!-- Wizard Container -->
    <div id="wizard-app" class="wizard-container">
        
        <!-- Progress Indicator -->
        <div class="wizard-progress">
            <div class="progress-steps">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Welcome</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Checklist</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">System Check</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Profiles</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Configure</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-label">Review</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="7">
                    <div class="step-number">7</div>
                    <div class="step-label">Install</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="8">
                    <div class="step-number">8</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="wizard-content">
            
            <!-- Step 1: Welcome -->
            <div class="wizard-step active" id="step-welcome">
                <div class="hero">
                    <!-- Kaspa Logo - Automatically switches for dark mode -->
                    <picture class="hero-logo-container">
                        <source srcset="/assets/brand/logos/svg/kaspa-logo-dark.svg" 
                                media="(prefers-color-scheme: dark)">
                        <img src="/assets/brand/logos/svg/kaspa-logo-light.svg" 
                             alt="Kaspa" 
                             class="hero-logo"
                             onerror="this.closest('.hero-logo-container').style.display='none'; document.querySelector('.hero-logo-placeholder').style.display='block';">
                    </picture>
                    
                    <!-- Placeholder if logo not yet downloaded -->
                    <div class="hero-logo-placeholder" style="display: none;">
                        <div class="logo-placeholder-text">KASPA</div>
                        <div class="logo-placeholder-note">Download logos from https://kaspa.org/media-kit/</div>
                        <div class="logo-placeholder-note">Place in assets/brand/logos/svg/</div>
                    </div>
                    
                    <h1 class="hero-title">Welcome to Kaspa All-in-One</h1>
                    <p class="hero-subtitle">
                        Set up your complete Kaspa ecosystem in minutes with our guided installation wizard
                    </p>
                    
                    <div class="hero-features">
                        <div class="feature-item">
                            <div class="feature-icon">‚ö°</div>
                            <div class="feature-text">Fast Setup</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üéØ</div>
                            <div class="feature-text">Guided Process</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">‚úÖ</div>
                            <div class="feature-text">Validated</div>
                        </div>
                    </div>
                    
                    <button class="btn-primary btn-large" onclick="nextStep()">
                        Get Started
                        <span class="btn-icon">‚Üí</span>
                    </button>
                    
                    <div class="hero-footer">
                        <a href="https://kaspa.org" target="_blank" class="link-secondary">Learn more about Kaspa</a>
                    </div>
                </div>
            </div>

            <!-- Step 2: Pre-Installation Checklist -->
            <div class="wizard-step" id="step-checklist">
                <div class="step-header">
                    <h2 class="step-title">Pre-Installation Checklist</h2>
                    <p class="step-description">
                        Let's make sure you're ready to install. We'll check what you need and help you get prepared.
                    </p>
                </div>

                <!-- Checklist Progress Summary -->
                <div class="checklist-summary">
                    <div class="summary-card">
                        <div class="summary-icon">üìã</div>
                        <div class="summary-content">
                            <div class="summary-title">Checklist Progress</div>
                            <div class="summary-value"><span id="checklist-completed">0</span> of <span id="checklist-total">5</span> ready</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">‚è±Ô∏è</div>
                        <div class="summary-content">
                            <div class="summary-title">Estimated Time</div>
                            <div class="summary-value" id="estimated-time">Calculating...</div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Items -->
                <div class="checklist-container">
                    
                    <!-- 1. System Requirements -->
                    <div class="checklist-item" data-item="requirements">
                        <div class="checklist-header" onclick="toggleChecklistItem('requirements')">
                            <div class="checklist-status">
                                <div class="status-icon">‚è≥</div>
                                <div class="status-text">Checking...</div>
                            </div>
                            <div class="checklist-title">
                                <h3>System Requirements</h3>
                                <p>Check if your computer has enough resources</p>
                            </div>
                            <div class="checklist-expand">‚ñº</div>
                        </div>
                        <div class="checklist-content">
                            <div class="requirement-checks" id="requirement-checks">
                                <div class="requirement-item">
                                    <div class="requirement-icon">üíª</div>
                                    <div class="requirement-info">
                                        <div class="requirement-name">CPU Cores</div>
                                        <div class="requirement-value" id="cpu-value">Checking...</div>
                                    </div>
                                    <div class="requirement-status" id="cpu-status">‚è≥</div>
                                </div>
                                <div class="requirement-item">
                                    <div class="requirement-icon">üß†</div>
                                    <div class="requirement-info">
                                        <div class="requirement-name">RAM Memory</div>
                                        <div class="requirement-value" id="ram-value">Checking...</div>
                                    </div>
                                    <div class="requirement-status" id="ram-status">‚è≥</div>
                                </div>
                                <div class="requirement-item">
                                    <div class="requirement-icon">üíæ</div>
                                    <div class="requirement-info">
                                        <div class="requirement-name">Disk Space</div>
                                        <div class="requirement-value" id="disk-value">Checking...</div>
                                    </div>
                                    <div class="requirement-status" id="disk-status">‚è≥</div>
                                </div>
                            </div>
                            <div class="checklist-help">
                                <strong>What this means:</strong> We need to make sure your computer is powerful enough to run Kaspa. Don't worry - we'll recommend the best setup for your system.
                            </div>
                        </div>
                    </div>

                    <!-- 2. Docker Installation -->
                    <div class="checklist-item" data-item="docker">
                        <div class="checklist-header" onclick="toggleChecklistItem('docker')">
                            <div class="checklist-status">
                                <div class="status-icon">‚è≥</div>
                                <div class="status-text">Checking...</div>
                            </div>
                            <div class="checklist-title">
                                <h3>Docker Installation</h3>
                                <p>Docker is required to run Kaspa services</p>
                            </div>
                            <div class="checklist-expand">‚ñº</div>
                        </div>
                        <div class="checklist-content">
                            <div class="docker-status" id="docker-status-detail">
                                <p>Checking for Docker installation...</p>
                            </div>
                            <div class="checklist-help">
                                <strong>What is Docker?</strong> Docker is like a container that packages everything Kaspa needs to run. It makes installation much easier and keeps everything organized.
                            </div>
                            <div class="checklist-actions" id="docker-actions" style="display: none;">
                                <button class="btn-secondary btn-small" onclick="showDockerGuide()">
                                    üìñ How to Install Docker
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Docker Compose -->
                    <div class="checklist-item" data-item="compose">
                        <div class="checklist-header" onclick="toggleChecklistItem('compose')">
                            <div class="checklist-status">
                                <div class="status-icon">‚è≥</div>
                                <div class="status-text">Checking...</div>
                            </div>
                            <div class="checklist-title">
                                <h3>Docker Compose</h3>
                                <p>Manages multiple Docker containers together</p>
                            </div>
                            <div class="checklist-expand">‚ñº</div>
                        </div>
                        <div class="checklist-content">
                            <div class="compose-status" id="compose-status-detail">
                                <p>Checking for Docker Compose...</p>
                            </div>
                            <div class="checklist-help">
                                <strong>What is Docker Compose?</strong> This tool helps manage all the different parts of Kaspa at once. It usually comes with Docker Desktop.
                            </div>
                            <div class="checklist-actions" id="compose-actions" style="display: none;">
                                <button class="btn-secondary btn-small" onclick="showComposeGuide()">
                                    üìñ How to Install Docker Compose
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Port Availability -->
                    <div class="checklist-item" data-item="ports">
                        <div class="checklist-header" onclick="toggleChecklistItem('ports')">
                            <div class="checklist-status">
                                <div class="status-icon">‚è≥</div>
                                <div class="status-text">Checking...</div>
                            </div>
                            <div class="checklist-title">
                                <h3>Network Ports</h3>
                                <p>Check if required network ports are available</p>
                            </div>
                            <div class="checklist-expand">‚ñº</div>
                        </div>
                        <div class="checklist-content">
                            <div class="ports-status" id="ports-status-detail">
                                <p>Checking port availability...</p>
                            </div>
                            <div class="checklist-help">
                                <strong>What are ports?</strong> Ports are like doors that let different programs communicate. We need certain ports to be available (not used by other programs).
                            </div>
                        </div>
                    </div>

                    <!-- 5. Help Me Choose Profile -->
                    <div class="checklist-item" data-item="quiz">
                        <div class="checklist-header" onclick="toggleChecklistItem('quiz')">
                            <div class="checklist-status">
                                <div class="status-icon">‚ùì</div>
                                <div class="status-text">Optional</div>
                            </div>
                            <div class="checklist-title">
                                <h3>Help Me Choose</h3>
                                <p>Not sure which profile to install? Take our quick quiz</p>
                            </div>
                            <div class="checklist-expand">‚ñº</div>
                        </div>
                        <div class="checklist-content">
                            <div class="quiz-container" id="quiz-container">
                                <div class="quiz-intro">
                                    <p>Answer a few quick questions and we'll recommend the best setup for you.</p>
                                    <button class="btn-primary btn-small" onclick="startQuiz()">
                                        Start Quiz
                                    </button>
                                </div>
                                <div class="quiz-questions" id="quiz-questions" style="display: none;">
                                    <!-- Quiz questions will be inserted here -->
                                </div>
                                <div class="quiz-result" id="quiz-result" style="display: none;">
                                    <!-- Quiz result will be shown here -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Time Estimates -->
                <div class="time-estimates" id="time-estimates" style="display: none;">
                    <h3>What to Expect</h3>
                    <div class="estimate-grid">
                        <div class="estimate-card">
                            <div class="estimate-icon">‚öôÔ∏è</div>
                            <div class="estimate-label">Setup Time</div>
                            <div class="estimate-value" id="setup-time">-</div>
                        </div>
                        <div class="estimate-card">
                            <div class="estimate-icon">‚¨áÔ∏è</div>
                            <div class="estimate-label">Download Size</div>
                            <div class="estimate-value" id="download-size">-</div>
                        </div>
                        <div class="estimate-card">
                            <div class="estimate-icon">üîÑ</div>
                            <div class="estimate-label">Sync Time</div>
                            <div class="estimate-value" id="sync-time">-</div>
                        </div>
                    </div>
                </div>

                <div class="step-actions">
                    <button class="btn-secondary" onclick="previousStep()">
                        <span class="btn-icon">‚Üê</span>
                        Back
                    </button>
                    <button class="btn-primary" onclick="nextStep()" id="checklist-continue">
                        Continue to System Check
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 3: System Check -->
            <div class="wizard-step" id="step-system-check">
                <div class="step-header">
                    <h2 class="step-title">System Requirements Check</h2>
                    <p class="step-description">
                        Verifying your system meets the requirements for Kaspa All-in-One
                    </p>
                </div>
                
                <div class="check-results">
                    <div class="check-item checking">
                        <div class="check-icon">
                            <div class="spinner"></div>
                        </div>
                        <div class="check-content">
                            <h3 class="check-title">Docker Installation</h3>
                            <p class="check-message">Checking for Docker...</p>
                        </div>
                        <div class="check-status">Checking</div>
                    </div>
                    
                    <div class="check-item checking">
                        <div class="check-icon">
                            <div class="spinner"></div>
                        </div>
                        <div class="check-content">
                            <h3 class="check-title">Docker Compose</h3>
                            <p class="check-message">Checking for Docker Compose...</p>
                        </div>
                        <div class="check-status">Checking</div>
                    </div>
                    
                    <div class="check-item checking">
                        <div class="check-icon">
                            <div class="spinner"></div>
                        </div>
                        <div class="check-content">
                            <h3 class="check-title">System Resources</h3>
                            <p class="check-message">Checking CPU, RAM, and disk space...</p>
                        </div>
                        <div class="check-status">Checking</div>
                    </div>
                    
                    <div class="check-item checking">
                        <div class="check-icon">
                            <div class="spinner"></div>
                        </div>
                        <div class="check-content">
                            <h3 class="check-title">Port Availability</h3>
                            <p class="check-message">Checking required ports...</p>
                        </div>
                        <div class="check-status">Checking</div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="previousStep()">
                        <span class="btn-icon">‚Üê</span>
                        Back
                    </button>
                    <button class="btn-primary" onclick="nextStep()" disabled>
                        Continue
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 3: Profile Selection -->
            <div class="wizard-step" id="step-profiles">
                <div class="step-header">
                    <h2 class="step-title">Select Your Deployment Profile</h2>
                    <p class="step-description">
                        Choose which services you want to run. You can select multiple profiles.
                    </p>
                </div>

                <!-- Resource Warning Container -->
                <div id="resource-warning" style="display: none;"></div>
                
                <div class="profile-grid">
                    <!-- Core Profile -->
                    <div class="profile-card" data-profile="core">
                        <div class="profile-badge">Essential</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="3"/>
                                <circle cx="24" cy="24" r="8" fill="currentColor"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Core Node</h3>
                        <p class="profile-description">
                            Essential Kaspa node for blockchain participation
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">kaspa-node</span>
                            <span class="service-tag">dashboard</span>
                            <span class="service-tag">nginx</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">2 cores</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">4 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">100 GB</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Production Profile -->
                    <div class="profile-card" data-profile="prod">
                        <div class="profile-badge">Popular</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <rect x="8" y="8" width="32" height="32" rx="4" stroke="currentColor" stroke-width="3"/>
                                <path d="M16 24 L24 32 L32 16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Production Apps</h3>
                        <p class="profile-description">
                            User-facing applications (Kasia, K-Social) with indexers
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">kasia-app</span>
                            <span class="service-tag">kasia-indexer</span>
                            <span class="service-tag">k-social</span>
                            <span class="service-tag">k-indexer</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">4 cores</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">8 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">150 GB</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Explorer Profile -->
                    <div class="profile-card" data-profile="explorer">
                        <div class="profile-badge">Advanced</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="3"/>
                                <circle cx="24" cy="24" r="3" fill="currentColor"/>
                                <line x1="24" y1="4" x2="24" y2="12" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <line x1="24" y1="36" x2="24" y2="44" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <line x1="4" y1="24" x2="12" y2="24" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <line x1="36" y1="24" x2="44" y2="24" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Explorer</h3>
                        <p class="profile-description">
                            Blockchain indexing with TimescaleDB for analytics
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">timescaledb</span>
                            <span class="service-tag">k-indexer</span>
                            <span class="service-tag">simply-kaspa</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">4 cores</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">8 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">200 GB SSD</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Archive Profile -->
                    <div class="profile-card" data-profile="archive">
                        <div class="profile-badge">Storage</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <rect x="8" y="12" width="32" height="8" rx="2" stroke="currentColor" stroke-width="3"/>
                                <rect x="8" y="24" width="32" height="8" rx="2" stroke="currentColor" stroke-width="3"/>
                                <rect x="8" y="36" width="32" height="8" rx="2" stroke="currentColor" stroke-width="3"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Archive Node</h3>
                        <p class="profile-description">
                            Long-term data retention with separate archive database
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">archive-db</span>
                            <span class="service-tag">archive-indexer</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">2 cores</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">4 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">500 GB+</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mining Profile -->
                    <div class="profile-card" data-profile="mining">
                        <div class="profile-badge">Mining</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <path d="M24 8 L32 20 L24 24 L16 20 Z" stroke="currentColor" stroke-width="3" stroke-linejoin="round"/>
                                <path d="M24 24 L32 20 L32 32 L24 40 Z" stroke="currentColor" stroke-width="3" stroke-linejoin="round"/>
                                <path d="M24 24 L16 20 L16 32 L24 40 Z" stroke="currentColor" stroke-width="3" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Mining</h3>
                        <p class="profile-description">
                            Kaspa stratum bridge for solo or pool mining
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">kaspa-stratum</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">2 cores</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">2 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">10 GB</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Development Profile -->
                    <div class="profile-card" data-profile="development">
                        <div class="profile-badge">Dev Tools</div>
                        <div class="profile-icon">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                <path d="M16 16 L8 24 L16 32" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M32 16 L40 24 L32 32" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                <line x1="28" y1="12" x2="20" y2="36" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3 class="profile-title">Development</h3>
                        <p class="profile-description">
                            Development tools (Portainer, pgAdmin) for debugging
                        </p>
                        <div class="profile-services">
                            <span class="service-tag">portainer</span>
                            <span class="service-tag">pgadmin</span>
                        </div>
                        <div class="profile-resources">
                            <div class="resource-item">
                                <span class="resource-label">CPU:</span>
                                <span class="resource-value">1 core</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">RAM:</span>
                                <span class="resource-value">1 GB</span>
                            </div>
                            <div class="resource-item">
                                <span class="resource-label">Disk:</span>
                                <span class="resource-value">5 GB</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="previousStep()">
                        <span class="btn-icon">‚Üê</span>
                        Back
                    </button>
                    <button class="btn-primary" onclick="nextStep()">
                        Continue
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 4: Configure -->
            <div class="wizard-step" id="step-configure">
                <div class="step-header">
                    <h2 class="step-title">Configure Your Services</h2>
                    <p class="step-description">
                        Customize settings for your selected services
                    </p>
                </div>
                
                <div class="config-sections">
                    <div class="config-section">
                        <h3 class="config-section-title">Network Configuration</h3>
                        <div class="config-form">
                            <div class="form-group">
                                <label for="external-ip" class="form-label">
                                    External IP Address
                                    <span class="form-tooltip" title="Your public IP address for P2P connections">‚ìò</span>
                                </label>
                                <input type="text" id="external-ip" class="form-input" placeholder="Auto-detect" />
                                <button class="btn-secondary btn-small" onclick="detectExternalIP()">Auto-Detect</button>
                            </div>
                            
                            <div class="form-group">
                                <label for="public-node" class="form-label">
                                    Public Node
                                    <span class="form-tooltip" title="Allow external connections to your node">‚ìò</span>
                                </label>
                                <div class="form-toggle">
                                    <input type="checkbox" id="public-node" class="toggle-input" />
                                    <label for="public-node" class="toggle-label">
                                        <span class="toggle-switch"></span>
                                        <span class="toggle-text">Enable public access</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h3 class="config-section-title">Database Configuration</h3>
                        <div class="config-form">
                            <div class="form-group">
                                <label for="db-password" class="form-label">
                                    Database Password
                                    <span class="form-tooltip" title="Password for PostgreSQL/TimescaleDB">‚ìò</span>
                                </label>
                                <div class="password-input-group">
                                    <input type="password" id="db-password" class="form-input" placeholder="Auto-generated" />
                                    <button class="btn-icon-only" onclick="togglePasswordVisibility('db-password')">
                                        <span class="icon-eye">üëÅ</span>
                                    </button>
                                    <button class="btn-secondary btn-small" onclick="generatePassword('db-password')">Generate</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h3 class="config-section-title">Advanced Options</h3>
                        <div class="config-form">
                            <div class="form-group">
                                <label class="form-label">
                                    <input type="checkbox" id="advanced-mode" />
                                    Show advanced configuration options
                                </label>
                            </div>
                            
                            <div id="advanced-options" class="advanced-options" style="display: none;">
                                <div class="form-group">
                                    <label for="custom-env" class="form-label">Custom Environment Variables</label>
                                    <textarea id="custom-env" class="form-textarea" rows="6" placeholder="KEY=value"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="previousStep()">
                        <span class="btn-icon">‚Üê</span>
                        Back
                    </button>
                    <button class="btn-primary" onclick="nextStep()">
                        Continue
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 5: Review -->
            <div class="wizard-step" id="step-review">
                <div class="step-header">
                    <h2 class="step-title">Review Your Configuration</h2>
                    <p class="step-description">
                        Verify your selections before installation
                    </p>
                </div>
                
                <div class="review-sections">
                    <div class="review-section">
                        <h3 class="review-section-title">Selected Profiles</h3>
                        <div class="review-content">
                            <div class="review-item">
                                <span class="review-label">Profiles:</span>
                                <span class="review-value" id="review-profiles">Core, Explorer</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Total Services:</span>
                                <span class="review-value" id="review-service-count">5 services</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="review-section">
                        <h3 class="review-section-title">Resource Requirements</h3>
                        <div class="review-content">
                            <div class="review-item">
                                <span class="review-label">CPU:</span>
                                <span class="review-value" id="review-cpu">4 cores</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">RAM:</span>
                                <span class="review-value" id="review-ram">8 GB</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Disk:</span>
                                <span class="review-value" id="review-disk">200 GB</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="review-section">
                        <h3 class="review-section-title">Network Configuration</h3>
                        <div class="review-content">
                            <div class="review-item">
                                <span class="review-label">External IP:</span>
                                <span class="review-value" id="review-external-ip">Auto-detect</span>
                            </div>
                            <div class="review-item">
                                <span class="review-label">Public Node:</span>
                                <span class="review-value" id="review-public-node">Disabled</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="review-section warning">
                        <div class="review-warning-icon">‚ö†Ô∏è</div>
                        <div class="review-warning-content">
                            <h4 class="review-warning-title">Before You Continue</h4>
                            <ul class="review-warning-list">
                                <li>Ensure you have sufficient disk space available</li>
                                <li>Initial blockchain sync may take several hours</li>
                                <li>Services will be accessible on localhost by default</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="previousStep()">
                        <span class="btn-icon">‚Üê</span>
                        Back
                    </button>
                    <button class="btn-primary" onclick="nextStep()">
                        Start Installation
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 6: Install -->
            <div class="wizard-step" id="step-install">
                <div class="step-header">
                    <h2 class="step-title">Installing Kaspa All-in-One</h2>
                    <p class="step-description">
                        Please wait while we set up your services
                    </p>
                </div>
                
                <div class="install-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-bar-fill" id="install-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="progress-percentage" id="install-progress-percentage">0%</div>
                    </div>
                    
                    <div class="install-status">
                        <div class="status-icon">
                            <div class="spinner"></div>
                        </div>
                        <div class="status-content">
                            <h3 class="status-title" id="install-status-title">Initializing...</h3>
                            <p class="status-message" id="install-status-message">Preparing installation environment</p>
                        </div>
                    </div>
                    
                    <div class="install-steps">
                        <div class="install-step" data-step="env">
                            <div class="install-step-icon">‚è≥</div>
                            <div class="install-step-content">
                                <h4 class="install-step-title">Creating environment configuration</h4>
                                <p class="install-step-status">Pending</p>
                            </div>
                        </div>
                        
                        <div class="install-step" data-step="pull">
                            <div class="install-step-icon">‚è≥</div>
                            <div class="install-step-content">
                                <h4 class="install-step-title">Pulling Docker images</h4>
                                <p class="install-step-status">Pending</p>
                            </div>
                        </div>
                        
                        <div class="install-step" data-step="start">
                            <div class="install-step-icon">‚è≥</div>
                            <div class="install-step-content">
                                <h4 class="install-step-title">Starting services</h4>
                                <p class="install-step-status">Pending</p>
                            </div>
                        </div>
                        
                        <div class="install-step" data-step="health">
                            <div class="install-step-icon">‚è≥</div>
                            <div class="install-step-content">
                                <h4 class="install-step-title">Running health checks</h4>
                                <p class="install-step-status">Pending</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="install-logs">
                        <div class="logs-header">
                            <h4 class="logs-title">Installation Logs</h4>
                            <button class="btn-secondary btn-small" onclick="toggleLogs()">
                                <span id="logs-toggle-text">Show Details</span>
                            </button>
                        </div>
                        <div class="logs-content" id="install-logs-content" style="display: none;">
                            <pre class="logs-text" id="install-logs-text">Waiting for installation to start...</pre>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="cancelInstallation()" id="cancel-install-btn">
                        Cancel Installation
                    </button>
                </div>
            </div>

            <!-- Step 8: Complete -->
            <div class="wizard-step" id="step-complete">
                <div class="step-header">
                    <div class="completion-icon celebration">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" class="checkmark-svg">
                            <circle cx="40" cy="40" r="38" stroke="#7ED321" stroke-width="4" class="checkmark-circle"/>
                            <path d="M25 40 L35 50 L55 30" stroke="#7ED321" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="checkmark-path"/>
                        </svg>
                        <!-- Celebration confetti -->
                        <div class="confetti-container">
                            <div class="confetti"></div>
                            <div class="confetti"></div>
                            <div class="confetti"></div>
                            <div class="confetti"></div>
                            <div class="confetti"></div>
                            <div class="confetti"></div>
                        </div>
                    </div>
                    <h2 class="step-title">üéâ Installation Complete!</h2>
                    <p class="step-description">
                        Your Kaspa All-in-One system is up and running. Let's make sure everything is working perfectly!
                    </p>
                </div>
                
                <!-- Tour Prompt -->
                <div class="tour-prompt">
                    <div class="tour-prompt-content">
                        <div class="tour-prompt-icon">üéØ</div>
                        <div class="tour-prompt-text">
                            <h3>Want a quick tour?</h3>
                            <p>We'll show you around and help you verify everything is working</p>
                        </div>
                    </div>
                    <div class="tour-prompt-actions">
                        <button class="btn-secondary" onclick="skipTour()">Skip for now</button>
                        <button class="btn-primary" onclick="startTour()">
                            Start Tour
                            <span class="btn-icon">‚Üí</span>
                        </button>
                    </div>
                </div>
                
                <div class="completion-sections">
                    <!-- Service Verification Section -->
                    <div class="completion-section" id="service-verification">
                        <div class="section-header">
                            <h3 class="completion-section-title">‚úì Service Verification</h3>
                            <button class="btn-text" onclick="runServiceVerification()">
                                <span class="btn-icon">üîÑ</span> Check Again
                            </button>
                        </div>
                        <p class="section-description">Let's verify all your services are healthy and running correctly</p>
                        
                        <div class="verification-status" id="verification-status">
                            <div class="verification-progress">
                                <div class="spinner-small"></div>
                                <span>Checking services...</span>
                            </div>
                        </div>
                        
                        <div class="service-status-list" id="service-status-list" style="display: none;">
                            <!-- Services will be populated dynamically -->
                        </div>
                        
                        <div class="verification-summary" id="verification-summary" style="display: none;">
                            <div class="summary-badge success">
                                <span class="badge-icon">‚úì</span>
                                <span class="badge-text">All services healthy</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Getting Started Guide -->
                    <div class="completion-section" id="getting-started">
                        <h3 class="completion-section-title">üöÄ What Now? Getting Started</h3>
                        <p class="section-description">Here's what you can do with your new Kaspa system</p>
                        
                        <div class="getting-started-grid">
                            <div class="guide-card" data-tour-target="dashboard">
                                <div class="guide-card-header">
                                    <div class="guide-card-icon">üìä</div>
                                    <h4 class="guide-card-title">Monitor Your System</h4>
                                </div>
                                <p class="guide-card-description">
                                    Use the dashboard to check service health, view logs, and monitor your node's sync progress
                                </p>
                                <div class="guide-card-actions">
                                    <button class="btn-link" onclick="openDashboard()">Open Dashboard ‚Üí</button>
                                    <button class="btn-text" onclick="startDashboardTour()">Take a tour</button>
                                </div>
                            </div>
                            
                            <div class="guide-card">
                                <div class="guide-card-header">
                                    <div class="guide-card-icon">‚è±Ô∏è</div>
                                    <h4 class="guide-card-title">Wait for Sync</h4>
                                </div>
                                <p class="guide-card-description">
                                    Your Kaspa node is syncing with the network. This typically takes 2-6 hours depending on your connection
                                </p>
                                <div class="guide-card-tip">
                                    <strong>Tip:</strong> You can monitor sync progress in the dashboard. The node is ready when it shows "Synced"
                                </div>
                            </div>
                            
                            <div class="guide-card">
                                <div class="guide-card-header">
                                    <div class="guide-card-icon">üîß</div>
                                    <h4 class="guide-card-title">Manage Services</h4>
                                </div>
                                <p class="guide-card-description">
                                    Start, stop, or restart services as needed. Each service can be controlled independently
                                </p>
                                <div class="guide-card-actions">
                                    <button class="btn-text" onclick="showServiceManagementGuide()">Learn how ‚Üí</button>
                                </div>
                            </div>
                            
                            <div class="guide-card">
                                <div class="guide-card-header">
                                    <div class="guide-card-icon">üìö</div>
                                    <h4 class="guide-card-title">Learn More</h4>
                                </div>
                                <p class="guide-card-description">
                                    Explore documentation, watch video tutorials, and join the community
                                </p>
                                <div class="guide-card-actions">
                                    <button class="btn-text" onclick="showResourcesModal()">View resources ‚Üí</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="completion-section">
                        <h3 class="completion-section-title">‚ö° Quick Actions</h3>
                        <div class="quick-actions-grid">
                            <button class="action-card" onclick="openDashboard()">
                                <div class="action-card-icon">üìä</div>
                                <div class="action-card-content">
                                    <h4 class="action-card-title">Open Dashboard</h4>
                                    <p class="action-card-description">Monitor and control services</p>
                                </div>
                                <span class="action-card-arrow">‚Üí</span>
                            </button>
                            
                            <button class="action-card" onclick="checkSyncStatus()">
                                <div class="action-card-icon">üîÑ</div>
                                <div class="action-card-content">
                                    <h4 class="action-card-title">Check Sync Status</h4>
                                    <p class="action-card-description">See blockchain sync progress</p>
                                </div>
                                <span class="action-card-arrow">‚Üí</span>
                            </button>
                            
                            <button class="action-card" onclick="viewLogs()">
                                <div class="action-card-icon">üìù</div>
                                <div class="action-card-content">
                                    <h4 class="action-card-title">View Logs</h4>
                                    <p class="action-card-description">Check service logs</p>
                                </div>
                                <span class="action-card-arrow">‚Üí</span>
                            </button>
                            
                            <button class="action-card" onclick="showResourcesModal()">
                                <div class="action-card-icon">üìö</div>
                                <div class="action-card-content">
                                    <h4 class="action-card-title">Documentation</h4>
                                    <p class="action-card-description">Learn more about Kaspa</p>
                                </div>
                                <span class="action-card-arrow">‚Üí</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Help & Support -->
                    <div class="completion-section">
                        <h3 class="completion-section-title">üí¨ Need Help?</h3>
                        <div class="help-options">
                            <a href="https://discord.gg/kaspa" target="_blank" class="help-option">
                                <div class="help-option-icon">üí¨</div>
                                <div class="help-option-content">
                                    <h4>Join Discord</h4>
                                    <p>Get help from the community</p>
                                </div>
                            </a>
                            <a href="https://kaspa.org/docs" target="_blank" class="help-option">
                                <div class="help-option-icon">üìñ</div>
                                <div class="help-option-content">
                                    <h4>Read Docs</h4>
                                    <p>Comprehensive guides and tutorials</p>
                                </div>
                            </a>
                            <a href="https://github.com/kaspanet" target="_blank" class="help-option">
                                <div class="help-option-icon">üêõ</div>
                                <div class="help-option-content">
                                    <h4>Report Issue</h4>
                                    <p>Found a bug? Let us know</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary" onclick="restartWizard()">
                        <span class="btn-icon">‚Ü∫</span> Run Wizard Again
                    </button>
                    <button class="btn-primary btn-large" onclick="openDashboard()">
                        Open Dashboard
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>
            
        </main>

        <!-- Footer -->
        <footer class="wizard-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <picture>
                        <source srcset="/assets/brand/icons/svg/kaspa-icon-dark.svg" 
                                media="(prefers-color-scheme: dark)">
                        <img src="/assets/brand/icons/svg/kaspa-icon-light.svg" 
                             alt="Kaspa" 
                             class="footer-logo-img">
                    </picture>
                    <span class="footer-text">Kaspa All-in-One</span>
                </div>
                <div class="footer-links">
                    <a href="https://kaspa.org" target="_blank">kaspa.org</a>
                    <a href="https://github.com/kaspanet" target="_blank">GitHub</a>
                    <a href="https://discord.gg/kaspa" target="_blank">Discord</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/wizard.js"></script>
</body>
</html>


    <!-- Safety Confirmation Modal -->
    <div id="safety-confirmation-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="safety.handleConfirmationAction('cancel')"></div>
        <div class="modal-content safety-confirmation-content">
            <div class="modal-header">
                <h2>Confirmation Required</h2>
                <button class="modal-close" onclick="safety.handleConfirmationAction('cancel')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Safety confirmation content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Installation Guide Modal -->
    <div id="installation-guide-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeInstallationGuide()"></div>
        <div class="modal-content installation-guide-content">
            <div class="modal-header">
                <h2 id="guide-title">Installation Guide</h2>
                <button class="modal-close" onclick="closeInstallationGuide()">√ó</button>
            </div>
            <div class="modal-body" id="guide-body">
                <!-- Guide content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Error Remediation Modal -->
    <div id="error-remediation-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="errorRemediation.closeRemediationModal()"></div>
        <div class="modal-content remediation-content">
            <div class="modal-header">
                <h2 id="remediation-title">Error - Auto-Fix Available</h2>
                <button class="modal-close" onclick="errorRemediation.closeRemediationModal()">√ó</button>
            </div>
            <div class="modal-body" id="remediation-body">
                <!-- Remediation content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Interactive Tour Modal -->
    <div id="tour-modal" class="modal tour-modal" style="display: none;">
        <div class="modal-overlay" onclick="closeTour()"></div>
        <div class="modal-content tour-content">
            <div class="modal-header">
                <div class="tour-progress">
                    <span class="tour-step-indicator">Step <span id="tour-current-step">1</span> of <span id="tour-total-steps">5</span></span>
                </div>
                <button class="modal-close" onclick="closeTour()">√ó</button>
            </div>
            <div class="modal-body tour-body" id="tour-body">
                <!-- Tour content will be inserted here -->
            </div>
            <div class="modal-footer tour-footer">
                <button class="btn-text" onclick="skipTour()">Skip Tour</button>
                <div class="tour-navigation">
                    <button class="btn-secondary" id="tour-prev-btn" onclick="previousTourStep()" disabled>
                        <span class="btn-icon">‚Üê</span> Previous
                    </button>
                    <button class="btn-primary" id="tour-next-btn" onclick="nextTourStep()">
                        Next <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resources Modal -->
    <div id="resources-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeResourcesModal()"></div>
        <div class="modal-content resources-content">
            <div class="modal-header">
                <h2>üìö Resources & Documentation</h2>
                <button class="modal-close" onclick="closeResourcesModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="resources-grid">
                    <div class="resource-category">
                        <h3 class="resource-category-title">üìñ Documentation</h3>
                        <div class="resource-links">
                            <a href="https://kaspa.org/docs" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üìÑ</span>
                                <span class="resource-link-text">Official Documentation</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://github.com/kaspanet" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üíª</span>
                                <span class="resource-link-text">GitHub Repository</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="./docs/README.md" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üìã</span>
                                <span class="resource-link-text">Local Documentation</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="resource-category">
                        <h3 class="resource-category-title">üé• Video Tutorials</h3>
                        <div class="resource-links">
                            <a href="https://youtube.com/@kaspa" target="_blank" class="resource-link">
                                <span class="resource-link-icon">‚ñ∂Ô∏è</span>
                                <span class="resource-link-text">Getting Started Video</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://youtube.com/@kaspa" target="_blank" class="resource-link">
                                <span class="resource-link-icon">‚ñ∂Ô∏è</span>
                                <span class="resource-link-text">Dashboard Overview</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://youtube.com/@kaspa" target="_blank" class="resource-link">
                                <span class="resource-link-icon">‚ñ∂Ô∏è</span>
                                <span class="resource-link-text">Troubleshooting Guide</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="resource-category">
                        <h3 class="resource-category-title">üí¨ Community</h3>
                        <div class="resource-links">
                            <a href="https://discord.gg/kaspa" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üí¨</span>
                                <span class="resource-link-text">Discord Community</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://reddit.com/r/kaspa" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üó®Ô∏è</span>
                                <span class="resource-link-text">Reddit Community</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://t.me/kaspaenglish" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üì±</span>
                                <span class="resource-link-text">Telegram Group</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="resource-category">
                        <h3 class="resource-category-title">üîß Tools & Utilities</h3>
                        <div class="resource-links">
                            <a href="http://localhost:3000" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üìä</span>
                                <span class="resource-link-text">Management Dashboard</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://explorer.kaspa.org" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üîç</span>
                                <span class="resource-link-text">Block Explorer</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                            <a href="https://kaspa.org/tools" target="_blank" class="resource-link">
                                <span class="resource-link-icon">üõ†Ô∏è</span>
                                <span class="resource-link-text">More Tools</span>
                                <span class="resource-link-arrow">‚Üí</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tour Spotlight Overlay -->
    <div id="tour-spotlight" class="tour-spotlight" style="display: none;">
        <div class="spotlight-overlay"></div>
        <div class="spotlight-target"></div>
        <div class="spotlight-tooltip">
            <div class="tooltip-content" id="spotlight-tooltip-content"></div>
            <div class="tooltip-arrow"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/scripts/wizard.js"></script>
    <script src="/scripts/safety-system.js"></script>
</body>
</html>
