# Simply Kaspa Indexer Personal Indexer Configuration
# User-specific indexing patterns and data retention policies

[personal_indexer]
# Enable Personal Indexer mode
enabled = false  # Set to true to enable personal indexer features
mode = "full"  # full, light, custom

[personal_indexer.user]
# User-specific settings
user_id = ""  # Optional user identifier
description = "Personal Kaspa blockchain indexer"
created_at = ""  # Auto-populated on first run

[indexing]
# What data to index (customize based on user needs)
index_all_blocks = true
index_all_transactions = true
index_all_addresses = false  # Set to true to track all addresses
index_specific_addresses = []  # List of specific addresses to track

[indexing.filters]
# Filtering options for personal indexing
min_transaction_value = 0  # Minimum transaction value to index (in sompi)
max_transaction_value = 0  # Maximum value (0 = no limit)
address_whitelist = []  # Only index these addresses (empty = all)
address_blacklist = []  # Never index these addresses
block_range_start = 0  # Start indexing from this block (0 = genesis)
block_range_end = 0  # Stop indexing at this block (0 = no limit)

[indexing.focus]
# Focus areas for personal indexing
track_my_addresses = []  # Your personal addresses to track
track_my_transactions = true  # Track transactions involving your addresses
track_balance_changes = true  # Track balance changes for your addresses
track_utxos = true  # Track UTXO set for your addresses
track_spending_patterns = false  # Analyze spending patterns

[retention]
# Personal data retention policies
enabled = true
strategy = "time_based"  # time_based, size_based, hybrid

[retention.time_based]
# Keep data for specified time periods
blocks_retention_days = 0  # 0 = keep forever
transactions_retention_days = 365  # Keep 1 year of transactions
inputs_retention_days = 180  # Keep 6 months of inputs
outputs_retention_days = 180  # Keep 6 months of outputs
addresses_retention_days = 0  # Keep address data forever

[retention.size_based]
# Keep data until size limits are reached
max_database_size_gb = 100  # Maximum database size
max_blocks_count = 0  # Maximum number of blocks (0 = no limit)
max_transactions_count = 0  # Maximum number of transactions (0 = no limit)
cleanup_strategy = "oldest_first"  # oldest_first, least_accessed

[retention.hybrid]
# Combine time and size-based retention
enabled = false
prefer_time_based = true
size_limit_gb = 50
time_limit_days = 365

[retention.exceptions]
# Data to keep regardless of retention policies
keep_my_addresses_forever = true
keep_my_transactions_forever = true
keep_high_value_transactions = true
high_value_threshold_kas = 1000

[compression]
# Personal indexer compression settings
aggressive_compression = true  # More aggressive compression for personal use
compress_after_hours = 1  # Compress data after 1 hour
compression_level = "high"  # low, medium, high, maximum

[compression.selective]
# Selective compression based on data importance
compress_old_blocks = true
compress_old_transactions = true
never_compress_my_data = true  # Never compress your personal data

[storage]
# Storage optimization for personal use
optimize_for_space = true  # Prioritize space savings
optimize_for_speed = false  # Prioritize query speed
use_external_storage = false  # Use external storage for archives
external_storage_path = ""

[privacy]
# Privacy settings for personal indexer
anonymize_other_addresses = false  # Anonymize addresses not in your list
encrypt_sensitive_data = false  # Encrypt sensitive data at rest
secure_delete = false  # Securely delete data when removed

[analytics]
# Personal analytics and insights
enabled = true
track_portfolio_value = true
track_transaction_history = true
calculate_statistics = true
generate_reports = false

[analytics.metrics]
# Metrics to track
balance_over_time = true
transaction_volume = true
transaction_frequency = true
average_transaction_size = true
utxo_distribution = true

[analytics.reports]
# Report generation
daily_summary = false
weekly_summary = false
monthly_summary = false
export_format = "json"  # json, csv, pdf
export_path = "/app/reports"

[sync]
# Synchronization settings for personal indexer
sync_mode = "selective"  # full, selective, on_demand
sync_my_addresses_first = true
sync_priority = "recent_first"  # recent_first, oldest_first, my_data_first

[sync.selective]
# Selective sync options
sync_only_my_transactions = false
sync_recent_blocks_count = 10000  # Sync last N blocks
sync_from_date = ""  # Sync from specific date (YYYY-MM-DD)
skip_empty_blocks = true

[performance]
# Performance tuning for personal use
low_resource_mode = false  # Optimize for low-resource systems
batch_size = 500  # Smaller batches for personal use
max_memory_mb = 1024  # Memory limit
max_cpu_percent = 50  # CPU usage limit

[backup]
# Backup settings for personal data
enabled = true
backup_interval_hours = 24
backup_path = "/app/backups"
keep_last_n_backups = 7
compress_backups = true
encrypt_backups = false

[backup.selective]
# Selective backup options
backup_my_data_only = false
backup_configuration = true
backup_statistics = true

[notifications]
# Notifications for personal indexer
enabled = false
notify_on_new_transaction = false  # Notify when your addresses receive transactions
notify_on_balance_change = false
notify_on_large_transaction = false
large_transaction_threshold_kas = 100

[notifications.channels]
# Notification channels
email_enabled = false
email_address = ""
webhook_enabled = false
webhook_url = ""
log_file_enabled = true

[monitoring]
# Personal indexer monitoring
enabled = true
track_sync_progress = true
track_database_size = true
track_query_performance = true
log_level = "info"

[monitoring.alerts]
# Alert conditions
alert_on_sync_failure = true
alert_on_disk_space_low = true
disk_space_threshold_percent = 90
alert_on_high_memory = true
memory_threshold_percent = 80

[customization]
# Custom indexing rules
enabled = false
custom_rules = []  # Array of custom indexing rules

[customization.example_rules]
# Example custom rules (commented out)
# rule_1 = { name = "High Value Transactions", condition = "value > 10000", action = "index_with_priority" }
# rule_2 = { name = "My Addresses", condition = "address in my_list", action = "never_delete" }
# rule_3 = { name = "Old Small Transactions", condition = "value < 1 AND age > 180d", action = "delete" }

[export]
# Data export options
enabled = true
export_format = "json"  # json, csv, sql
export_path = "/app/exports"
include_metadata = true

[export.options]
# Export options
export_my_transactions = true
export_my_addresses = true
export_statistics = true
export_compressed = true

[maintenance]
# Maintenance settings
auto_maintenance = true
maintenance_interval_hours = 168  # Weekly
vacuum_database = true
reindex_tables = false
update_statistics = true

[logging]
# Logging configuration
level = "info"  # debug, info, warn, error
log_personal_events = true
log_retention_actions = true
log_compression_actions = true
log_file_path = "/app/logs/personal-indexer.log"
max_log_size_mb = 100
max_log_files = 10
