# Personal Indexer Configuration for K-Social (Rust)
# Optimizes indexing for individual user data patterns and preferences

[personal_indexer]
enabled = false  # Set via PERSONAL_INDEXER_MODE environment variable
user_address = ""  # Set via USER_ADDRESS environment variable

# Data retention policies (user-specific)
[retention.posts]
own = "5 years"      # Keep user's own posts longer
following = "2 years" # Keep posts from followed users
others = "6 months"   # Keep other posts for shorter time

[retention.votes]
own = "2 years"      # Keep user's own votes
received = "2 years"  # Keep votes on user's posts
others = "6 months"   # Keep other votes

[retention.follows]
own = "5 years"      # Keep user's follow relationships
others = "1 year"    # Keep other follow relationships

[retention.profiles]
own = "forever"      # Keep user's profile forever
following = "5 years" # Keep followed users' profiles
others = "1 year"    # Keep other profiles

[retention.transactions]
own = "5 years"      # Keep user's transactions
related = "2 years"   # Keep transactions related to user
others = "6 months"   # Keep other transactions

# Indexing priorities (what to index first/more frequently)
[priorities]
high = [
    "own_posts",
    "own_votes", 
    "own_follows",
    "own_profile",
    "votes_on_own_posts",
    "replies_to_own_posts"
]
medium = [
    "following_posts",
    "following_profiles",
    "mentions_of_user"
]
low = [
    "other_posts",
    "other_votes",
    "other_follows"
]

# Notification preferences
[notifications]
enabled = true

[notifications.types]
new_follower = true
post_liked = true
post_replied = true
mentioned = true
followed_user_posted = false  # Can be overwhelming

[notifications.delivery]
realtime = ["mentioned", "post_replied"]
batched = ["new_follower", "post_liked"]
batch_interval = "1 hour"

# Performance optimizations for user-specific queries
[optimizations]
user_indexes = true  # Create user-specific indexes

[optimizations.caching]
enabled = true
user_posts = "1 hour"
user_profile = "30 minutes"
user_follows = "2 hours"
user_notifications = "5 minutes"

[optimizations.precompute]
enabled = true
user_stats = true
following_activity = true
engagement_metrics = true

# Privacy and filtering settings
[privacy]
respect_blocks = true  # Filter out blocked users
share_data = false     # Limit data sharing
anonymize_others = false

[privacy.content_filtering]
enabled = false
keywords = []
users = []

# Storage optimization
[storage]
aggressive_compression = true  # Compress older data more aggressively
user_partitioning = true      # Partition data by user activity patterns

[storage.compression_by_type]
posts = "high"
votes = "medium"
follows = "low"
profiles = "medium"